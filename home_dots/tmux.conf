# Try to set up tmux as close to vi as possible
# Also use Solarized colors

unbind-key C-b
set-option -g prefix C-f
set-option -g status-key vi
set-window-option -g mode-keys vi
set-window-option -g monitor-activity on
set-option -g base-index 1
set-option -g renumber-windows on
set-option -s escape-time 0
set-option -g default-terminal "screen-256color"

set-window-option -g mode-mouse on
set-option -g mouse-resize-pane on
set-option -g mouse-select-pane on
set-option -g mouse-select-window on
set-option -g mouse-utf8 on

bind-key C-f send-prefix

######## Vi style bindings ############
# try to stick as close to vi CTRL-W bindings as possible

unbind-key h
unbind-key j
unbind-key k
unbind-key l
unbind-key w
unbind-key W
unbind-key %
unbind-key s
unbind-key v
unbind-key <
unbind-key >
unbind-key -
unbind-key +
unbind-key s
unbind-key v
unbind-key r
unbind-key R
unbind-key T

unbind-key C-h
unbind-key C-l
unbind-key [
unbind-key ]
unbind-key C-PageDown
unbind-key C-PageUp
unbind-key t
unbind-key n

unbind-key C-r
unbind-key q
unbind-key '"'
unbind-key p

bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
bind-key w select-pane -t :.+
bind-key W last-pane
# TODO: need an alternate choose tree method
bind-key -r < resize-pane -L 1
bind-key -r > resize-pane -R 1
bind-key -r - resize-pane -D 1
bind-key -r + resize-pane -U 1
bind-key s split-window -v
bind-key v split-window -h
bind-key r rotate-window
bind-key R rotate-window -D
bind-key T break-pane  # C-W T

# bind-key -r C-h select-window -t :-
# bind-key -r C-l select-window -t :+
# TODO: what does this break? what does vim use?
bind-key -r C-h previous-window
bind-key -r C-l next-window
bind-key -r [ previous-window # unimpared
bind-key -r ] next-window # unimpared
bind-key t next-window # gt
bind-key C-PageDown next-window
bind-key C-PageUp previous-window
bind-key n new-window

bind-key C-r refresh-client
bind-key q confirm-before -p "Kill pane #P? (y/n)" kill-pane
bind-key '"' choose-tree
bind-key p run "tmux set-buffer -- \"$(xclip -o -selection clipboard)\"; tmux paste-buffer"


######### Vi copy mode fixes #########

# bind C-c run "tmux save-buffer - | xclip -i -selection clipboard"
# bind C-v run "tmux set-buffer -- \"$(xclip -o -selection clipboard)\"; tmux paste-buffer"
unbind-key Escape
unbind-key -t vi-copy Space
unbind-key -t vi-copy Enter
bind-key Escape copy-mode
bind-key -t vi-copy v begin-selection
bind-key -t vi-copy y copy-pipe "xclip -i -selection clipboard"
bind-key -t vi-copy i cancel

######## Status bar ##########

set-option -g status-left ""
set-option -g status-right "#h #S | %b %d"
set-option -g status-justify left
set-option -g window-status-format "#I #W#F "
set-option -g window-status-current-format "#I #W#F "
set-option -g status-utf8 on

set-option -g set-titles on
set-option -g set-titles-string "[#S] #W"

######## Color ########

# default statusbar colors
set-option -g status-bg colour235 #base02
set-option -g status-fg default #colour136 #yellow
set-option -g status-attr default

# default window title colors
set-window-option -g window-status-fg colour244
set-window-option -g window-status-bg default
set-window-option -g window-status-attr dim

# active window title colors
set-window-option -g window-status-current-fg colour166 #blue
set-window-option -g window-status-current-bg default
set-window-option -g window-status-current-attr bright

# pane border
set-option -g pane-border-fg colour235 #base02
set-option -g pane-active-border-fg colour240 #base01

# message text
set-option -g message-bg colour235 #base02
set-option -g message-fg colour166 #orange

# pane number display
set-option -g display-panes-active-colour colour33 #blue
set-option -g display-panes-colour colour166 #orange

# clock
set-window-option -g clock-mode-colour colour64 #green
